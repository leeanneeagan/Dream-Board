<!-- Project Foundation  
This project was built using a template as a starting point and customized to fit the appâ€™s unique features and design.  
All final code and design choices were reviewed, tested, and implemented by the author.
 -->



<!-- //  AI Assistance
// Parts of this code were assisted with the use of ChatGPT as a learning tool.
// All final code was reviewed, tested, and modified by the project author.

 -->






<!doctype html>
<html>

<head>
  <title>Dream Diary ðŸŒ™âœ¨</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <div class="page-header text-center">
      <h1><span class="fa fa-cloud"></span> Dream Diary ðŸŒ™âœ¨</h1>
      <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    </div>

    <div class="layout-wrapper">

      <div class="sidebar">
        <h3>Your Dreams</h3>

        <% if (dreams && dreams.length===0) { %>
          <p>No dreams yet â€” add your first one below!</p>
          <% } %>

            <% if (dreams && dreams.length> 0) { %>
              <% dreams.forEach(dream=> { %>
                <div class="entry mb-3 p-2 border rounded" data-id="<%= dream._id %>">
                  <div class="entry-header">
                    <strong class="entry-title">
                      <%= dream.title %>
                    </strong>
                  </div>

                  <div class="entry-content">
                    <p>
                      <%= dream.content %>
                    </p>
                  </div>

                  <% if(dream.mood){ %>
                    <div class="entry-mood"><em>Mood: <%= dream.mood %></em></div>
                    <% } %>

                      <div class="entry-date">
                        <small>Saved on <%= new Date(dream.createdAt).toLocaleString() %></small>
                      </div>

                      <div class="entry-actions mt-2">
                        <i class="fa fa-pencil" style="cursor:pointer; margin-right:8px;"></i>
                        <i class="fa fa-trash" style="cursor:pointer;"></i>
                      </div>
                </div>
                <% }) %>
                  <% } %>
      </div>

      <div class="main-content">
        <h3>Add a New Dream</h3>

        <% if (user.local.email) { %>
          <form action="/dreams" method="POST">
            <input type="text" placeholder="Title" name="title" required class="form-control mb-2">
            <textarea placeholder="Describe your dream..." name="content" required class="form-control mb-2"></textarea>
            <input type="text" placeholder="Mood (optional)" name="mood" class="form-control mb-2">
            <button type="submit" class="btn btn-success">Save Dream</button>
          </form>
          <% } %>


            <div id="preview-area" hidden class="mt-3 p-3 border rounded bg-light"></div>


            <div id="edit-section" style="display:none;">
              <h3>Edit Dream</h3>
              <form id="edit-dream-form">
                <input type="hidden" id="dreamId" />
                <input type="text" id="title" name="title" class="form-control mb-2" placeholder="Edit title" required>
                <textarea id="content" name="content" class="form-control mb-2" placeholder="Edit dream content"
                  required></textarea>
                <input type="text" id="mood" name="mood" class="form-control mb-2" placeholder="Mood (optional)">
                <button type="submit" class="btn btn-primary">Update Dream</button>
                <button type="button" class="btn btn-default" id="cancel-edit">Cancel</button>
              </form>
            </div>
      </div>
    </div>

  </div>

  <script src="main.js"></script>

</body>

</html>